import Image from '@/components/Image'
import ModuleInfo from '@/components/ModuleInfo'
import styles from '@/components/image.module.css'
import { Callout } from 'nextra-theme-docs';

# Media Optimizer

<ModuleInfo/>

Automatically optimize images, audio and video on upload.

### How to use

<Callout type='warning' emoji='⚠️'>
  This module will only work on Chromium based browsers (Chrome, Edge, Brave, etc) and the Foundry VTT Desktop App.
</Callout>

This module will automatically convert any images, audio and video you upload into foundry to WEBP, WEBM and OGG, it also has the ability to downscale the image.

You can configure compression and downscaling in the module settings. By default images will be compressed with a 0.75 ratio and kept at a maximum resolution of 8K, images above that resolution are not downscaled.

### Tile Combiner

<Image
  src='/images/Media-Optimizer/combiner.png'
  alt='Tile Combiner Menu'
  className={styles.wikiImage}
/>

The Tile Combiner is a powerful tool that allows you to combine multiple tiles and background image into a single image, this can considerably improve performance and load times for maps with a lot of tiles.
This feature will also render Token Magic FX and other filters to the final image.
Note that animated tiles are not supported.

### Mass Optimizer
<Image
  src='/images/Media-Optimizer/massoptimize.png'
  alt='Mass Optimizer Menu'
  className={styles.wikiImage}
/>

You can access the Mass Optimizer from the File Picker header buttons, this will allow you to optimize all media in the current folder at once.
Keep in mind that, as modules cannot delete files, the original files will not be deleted, you will have to delete them manually.

### Audio\Video Conversion

<Callout type='info' emoji='ℹ️'>
  [VTT Desktop Client](../free/vtt-desktop-client) users don't need to do anything, the conversion will work out of the box.
</Callout>

For the audio\video conversion to work, you need to create a shortcut to the chrome browser and add the ` --enable-features=SharedArrayBuffer` flag at the end of it.

The `target` of your shortcut should look something like this:

```
"C:\Program Files\Google\Chrome\Application\chrome.exe" --enable-features=SharedArrayBuffer
```

#### Audio\Video Conversion Time

Time for conversion can vary, but as a rule of thumb, it takes about 2 minutes to convert 1 hour of audio and 10 minutes to convert 1 minute of video.

If you wish, you can open the console (F12) and watch the conversion progress.

#### Audio\Video Compression

The audio compression will depend on the original file, but it should be around 50% of the original size.

The video compression will depend on the original file, but it should be around 10% of the original size.
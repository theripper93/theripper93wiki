import Image from '@/components/Image';
import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';
import { faLayerGroup, faCube, faUser, faGamepad, faFolder } from '@fortawesome/free-solid-svg-icons';
import styles from '@/components/image.module.css';
import { Callout } from 'nextra-theme-docs';

# 3D Canvas Getting Started

<Callout type="info" emoji="ℹ️">
_Lost with how to navigate in 3D? Check the [controls section](./#controls)\!_
</Callout>

A guide for quickly getting started with [3D Canvas](./).

If you prefer Video Guides, you can check [3D Canvas Installation](https://youtu.be/eHzUG64EMJk) and the [3D Canvas Tutorials](https://youtube.com/playlist?list=PLbNUuLLqMgaBfNAyYb6mhg4pR4bPcHXqM) with the most recent 3D Canvas Video guides

## Quickstart

The easiest way to get started with 3D Canvas is to follow the in-Foundry guide when prompted. It will guide you through creating your first 3D Scene and explain the basics of 3D Canvas. These steps will get you from the installation to the in-Foundry guide.

<section className='steps-container-h3'>

### Download 3D Canvas

You can download the latest version [here](https://theripper93.com/module/levels-3d-preview)

### Install 3D Canvas

Install 3D Canvas following the [Installation Guide](https://theripper93.com/info/installation).

### Install the companion modules

While not strictly required, for the smoothest experience it's suggested that you install the companion modules.
By installing this modules you will also automatically install the 3D Canvas dependencies.

[3D Canvas Mapmaking Pack](./canvas3dcompendium) and [3D Canvas Token Compendium](./canvas3dtokencompendium)

You can install these modules like any regular module by searching their name in the module browser inside Foundry.

### Enable 3D Canvas

Launch your world and enable: 3D Canvas, 3D Canvas Mapmaking Pack and 3D Canvas Token Compendium.
When enabling the modules you will also be prompted to enable the dependencies.

### Get Started

If you are not interested in loading custom models, you can simply follow the in-Foundry guide when prompted. It will guide you through creating your first 3D Scene and explain the basics of 3D Canvas.
In this case you can skip to the [What next?](./3D-Canvas-Getting-Started/#what-next) section.

</section>

## Your First 3D Scene

It's recommended to follow the in-Foundry guide when prompted. If you prefer a written guide or you want to learn more about uploading custom assets, you can follow the steps below.

<section className='steps-container-h3'>

### Obtain a model

We will be using [this model](https://sketchfab.com/3d-models/arena-game-level-design-2af935c72b0d4e758ef5ad376d0dba32)
as an example for the guide. You can use any other model for this
tutorial.

Download the model above or a model of your choice for the scene.
Ensure the model is downloaded in or converted to the **GLB** format.

### Set up 3D Canvas

Ensure you have all the [required modules](./#modules) enabled and installed.

Once you have [3D Canvas](./) and its required modules
enabled, you will now be able to create and view 3D Scenes in Foundry.

### Enable 3D

You can enable 3D on any map by pressing the Toggle 3D Mode button <FontAwesomeIcon icon={faCube} /> located under the Token Controls <FontAwesomeIcon icon={faUser} />

This also works for preexisting maps. Enabling 3D Mode will not make any
changes to your original 2D Scene.

### Create a 3D Scene

First create a scene as you normally would.

In the Scene Configuration, under the 3D Tab, enable `Enable for
   Players` and `Enable 3D on Load` and `Use 3D Geometry for
   Sight Calculations` and then save the scene configuration.

<Callout type='warning' emoji='⚠️'>
  When you have `Use 3D Geometry for  Sight Calculations` enabled,
  vision will not work when the map is in 2D Mode but will only work in 3D!
</Callout>

### Upload your model

Enter 3D Mode and navigate to the Tiles Layer, click the Folder icon,
and browse to your preferred directory.

When you open the **Tile Browser** while in 3D Mode
you will be able to upload 3D Models the same way you would upload an image

Upload the downloaded GLB file then drag and drop it onto the scene.
Note that if you open the File Browser while in 2D Mode it will show images
instead of 3D Models!

### Scale your model

On the Foundry sidebar, open your compendiums submenu. Locate the _3D Canvas Macro
Compendium_.

Select your tile by clicking on it, then run the _Fit Tile To Scene_ Macro.

### Play around

Drag some tokens from the sidebar to the scene and start playing in 3D\!

### Beyond the basics

Now that you are familiar with basic 3D Canvas functionality, it's
highly suggested that you install [3D Canvas Mapmaking Pack](./canvas3dcompendium)
and [3D Canvas Token Compendium](./canvas3dtokencompendium)
so you have some tiles, tokens and premade scenes to play around with\!

The [3D Canvas Mapmaking Pack](./canvas3dcompendium)
will give you access to both assets and tools to make map building way easier!

### Open the tile builder controls

Head to the tiles layer, you will see a <FontAwesomeIcon icon={faGamepad} /> icon, this will show you
a quick reference of the tile builder controls, click it.

### Open the file browser

You can do this by clicking the <FontAwesomeIcon icon={faFolder} /> icon.

Navigate to `modules/canvas3dcompendium/assets/Tiles` or use the [Asset Browser](./canvas3dcompendium#asset-browser).

### Choose your preferred assets

Drag and drop them onto the scene and start building\!

</section>

## What next?

It's also suggested that you install [3D Portraits](./three-actor-portrait) and
[Filepicker+](../premium/filepicker-plus) to get
3D Previews when you hover over files
and [Heroforge](https://www.heroforge.com/) integration!
Once that is setup, you can start building your own scenes by using 3D Tiles!

To further enhance your 3D Canvas Experience, you can check the
[Recommended Modules](./#modules).
